<!-- Sidebar Header -->
<div class="px-4 py-3 border-b border-gray-200 h-16 flex items-center">
  <div class="flex items-center gap-2">
    <div class="w-7 h-7 bg-blue-600 rounded-full flex items-center justify-center">
      <div class="w-3.5 h-3.5 bg-white rounded-full"></div>
    </div>
    <span class="text-lg font-semibold text-gray-900"><%= t('site_name') %></span>
  </div>
</div>

<!-- Sidebar Body -->
<div class="flex-1 overflow-hidden flex flex-col min-h-0">
  <nav class="flex-1 px-3 space-y-0.5 overflow-y-auto overflow-x-hidden min-h-0" aria-label="Sidebar" data-controller="sidebar">
    <!-- Dashboard Item -->
    <div class="mb-3">
      <div class="flex items-center gap-2.5 px-2.5 py-1.5 text-gray-900 bg-gray-50 rounded-md">
        <i class="fa fa-tachometer w-4 h-4"></i>
        <span class="font-medium text-sm"><%= link_to t('.dashboard'), admin_root_path, class: "text-gray-900" %></span>
      </div>
    </div>

    <% unless tenant_site? %>
      <!-- Sites Section -->
      <div class="space-y-0.5 mt-4">
        <div class="px-2.5 py-1 text-xs font-medium text-gray-500 uppercase tracking-wide"><%= t('.sites') %></div>
        <div class="flex items-center gap-2.5 px-2.5 py-1.5 text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded-md cursor-pointer">
          <i class="fa fa-sitemap w-4 h-4"></i>
          <%= link_to t('.list'), admin_sites_path, class: "text-sm" %>
        </div>
        <div class="flex items-center gap-2.5 px-2.5 py-1.5 text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded-md cursor-pointer">
          <i class="fa fa-plus w-4 h-4"></i>
          <%= link_to t('.new'), new_admin_site_path, class: "text-sm" %>
        </div>
      </div>
    <% end %>

    <!-- General Section -->
    <div class="space-y-0.5 mt-4">
      <div class="px-2.5 py-1 text-xs font-medium text-gray-500 uppercase tracking-wide"><%= t('.general') %></div>

      <!-- News Collapsible Section -->
      <div>
        <button class="flex items-center justify-between w-full px-2.5 py-1.5 text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded-md cursor-pointer focus:outline-none focus:ring-2 focus:ring-blue-500"
                aria-expanded="false" aria-controls="news-submenu" data-sidebar-target="button" data-action="click->sidebar#toggle">
          <div class="flex items-center gap-2.5">
            <i class="fa fa-newspaper-o w-4 h-4"></i>
            <span class="text-sm"><%= t('.news') %></span>
          </div>
          <i class="fa fa-caret-down w-4 h-4 transition-transform duration-200"></i>
        </button>
        <div id="news-submenu" class="ml-6 mt-1 space-y-0.5 transition-all duration-200 overflow-hidden max-h-0 opacity-0">
          <div class="flex items-center gap-2.5 px-2.5 py-1.5 text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded-md cursor-pointer">
            <i class="fa fa-list w-4 h-4"></i>
            <%= link_to t('.list'), admin_news_index_path, class: "text-sm" %>
          </div>
          <div class="flex items-center gap-2.5 px-2.5 py-1.5 text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded-md cursor-pointer">
            <i class="fa fa-plus w-4 h-4"></i>
            <%= link_to t('.new'), new_admin_news_path, class: "text-sm" %>
          </div>
        </div>
      </div>

      <!-- Slider Collapsible Section -->
      <div>
        <button class="flex items-center justify-between w-full px-2.5 py-1.5 text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded-md cursor-pointer focus:outline-none focus:ring-2 focus:ring-blue-500"
                aria-expanded="false" aria-controls="slider-submenu" data-sidebar-target="button" data-action="click->sidebar#toggle">
          <div class="flex items-center gap-2.5">
            <i class="fa fa-picture-o w-4 h-4"></i>
            <span class="text-sm"><%= t('.slider') %></span>
          </div>
          <i class="fa fa-caret-down w-4 h-4 transition-transform duration-200"></i>
        </button>
        <div id="slider-submenu" class="ml-6 mt-1 space-y-0.5 transition-all duration-200 overflow-hidden max-h-0 opacity-0">
          <div class="flex items-center gap-2.5 px-2.5 py-1.5 text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded-md cursor-pointer">
            <i class="fa fa-list w-4 h-4"></i>
            <%= link_to t('.list'), admin_sliders_path, class: "text-sm" %>
          </div>
          <div class="flex items-center gap-2.5 px-2.5 py-1.5 text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded-md cursor-pointer">
            <i class="fa fa-plus w-4 h-4"></i>
            <%= link_to t('.new'), new_admin_slider_path, class: "text-sm" %>
          </div>
        </div>
      </div>

      <!-- Blocks Collapsible Section -->
      <div>
        <button class="flex items-center justify-between w-full px-2.5 py-1.5 text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded-md cursor-pointer focus:outline-none focus:ring-2 focus:ring-blue-500"
                aria-expanded="false" aria-controls="blocks-submenu" data-sidebar-target="button" data-action="click->sidebar#toggle">
          <div class="flex items-center gap-2.5">
            <i class="fa fa-cube w-4 h-4"></i>
            <span class="text-sm"><%= t('.blocks') %></span>
          </div>
          <i class="fa fa-caret-down w-4 h-4 transition-transform duration-200"></i>
        </button>
        <div id="blocks-submenu" class="ml-6 mt-1 space-y-0.5 transition-all duration-200 overflow-hidden max-h-0 opacity-0">
          <div class="flex items-center gap-2.5 px-2.5 py-1.5 text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded-md cursor-pointer">
            <i class="fa fa-list w-4 h-4"></i>
            <%= link_to t('.list'), admin_blocks_path, class: "text-sm" %>
          </div>
          <div class="flex items-center gap-2.5 px-2.5 py-1.5 text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded-md cursor-pointer">
            <i class="fa fa-plus w-4 h-4"></i>
            <%= link_to t('.new'), new_admin_block_path, class: "text-sm" %>
          </div>
        </div>
      </div>
    </div>

    <% if tenant_site? %>
      <!-- Tenant Features -->
      <div>
        <%= admin_v2_sidebar_section t('.tenant_features') %>
        <!-- Menus -->
        <%= admin_v2_sidebar_group t('.menus') do %>
          <%= admin_v2_sidebar_item t('.list'), admin_menu_items_path, icon: 'bars' %>
          <%= admin_v2_sidebar_item t('.new'), new_admin_menu_item_path, icon: 'plus' %>
        <% end %>
        <!-- Plans -->
        <%= admin_v2_sidebar_group t('.plans') do %>
          <%= admin_v2_sidebar_item t('.list'), admin_plans_path, icon: 'cube' %>
          <%= admin_v2_sidebar_item t('.new'), new_admin_plan_path, icon: 'plus' %>
        <% end %>
        <!-- Partners -->
        <%= admin_v2_sidebar_group t('.partner') do %>
          <%= admin_v2_sidebar_item t('.list'), admin_partners_path, icon: 'handshake-o' %>
          <%= admin_v2_sidebar_item t('.new'), new_admin_partner_path, icon: 'plus' %>
          <%= admin_v2_sidebar_item t('.types'), admin_partner_types_path, icon: 'folder-o' %>
          <%= admin_v2_sidebar_item t('.new_type'), new_admin_partner_type_path, icon: 'plus' %>
        <% end %>
        <!-- Sponsors -->
        <%= admin_v2_sidebar_group t('.sponsor') do %>
          <%= admin_v2_sidebar_item t('.list'), admin_sponsors_path, icon: 'money' %>
          <%= admin_v2_sidebar_item t('.new'), new_admin_sponsor_path, icon: 'plus' %>
          <%= admin_v2_sidebar_item t('.levels'), admin_sponsor_levels_path, icon: 'diamond' %>
          <%= admin_v2_sidebar_item t('.new_level'), new_admin_sponsor_level_path, icon: 'plus' %>
        <% end %>
        <!-- Speakers -->
        <%= admin_v2_sidebar_group t('.speaker') do %>
          <%= admin_v2_sidebar_item t('.list'), admin_speakers_path, icon: 'users' %>
          <%= admin_v2_sidebar_item t('.new'), new_admin_speaker_path, icon: 'plus' %>
        <% end %>
        <!-- Agenda -->
        <%= admin_v2_sidebar_group t('.agenda') do %>
          <%= admin_v2_sidebar_item t('.list'), admin_agendas_path, icon: 'file-text' %>
          <%= admin_v2_sidebar_item t('.new'), new_admin_agenda_path, icon: 'plus' %>
          <%= admin_v2_sidebar_item t('.rooms'), admin_rooms_path, icon: 'columns' %>
          <%= admin_v2_sidebar_item t('.new_room'), new_admin_room_path, icon: 'plus' %>
          <%= admin_v2_sidebar_item t('.days'), admin_agenda_days_path, icon: 'calendar' %>
          <%= admin_v2_sidebar_item t('.new_day'), new_admin_agenda_day_path, icon: 'plus' %>
          <%= admin_v2_sidebar_item t('.times'), admin_agenda_times_path, icon: 'clock-o' %>
          <%= admin_v2_sidebar_item t('.new_time'), new_admin_agenda_time_path, icon: 'plus' %>
          <%= admin_v2_sidebar_item t('.tags'), admin_agenda_tags_path, icon: 'tags' %>
          <%= admin_v2_sidebar_item t('.new_tag'), new_admin_agenda_tag_path, icon: 'plus' %>
        <% end %>
        <!-- Indie Space -->
        <%= admin_v2_sidebar_group t('.indie_space') do %>
          <%= admin_v2_sidebar_item t('.list'), admin_indie_space_games_path, icon: 'list' %>
          <%= admin_v2_sidebar_item t('.new'), new_admin_indie_space_game_path, icon: 'plus' %>
          <%= admin_v2_sidebar_item t('.options'), edit_admin_indie_space_path, icon: 'gear' %>
        <% end %>

        <!-- Night Market -->
        <%= admin_v2_sidebar_group t('.night_market') do %>
          <%= admin_v2_sidebar_item t('.list'), admin_night_market_games_path, icon: 'list' %>
          <%= admin_v2_sidebar_item t('.new'), new_admin_night_market_game_path, icon: 'plus' %>
        <% end %>
        <!-- Options -->
        <ul class="space-y-0.5">
          <%= admin_v2_sidebar_item t('.options'), edit_admin_options_path, icon: 'gear' %>
        </ul>
      </div>
    <% end %>
  </nav>

  <!-- Sidebar Footer -->
  <div class="px-3 py-3 border-t border-gray-200 space-y-0.5 flex-shrink-0">
    <%= link_to admin_feature_toggle_path(feature: 'admin_v2'), method: :patch, data: { turbo_method: :patch },
                class: "flex items-center gap-2.5 px-2.5 py-1.5 text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded-md cursor-pointer" do %>
      <i class="fa <%= admin_v2_enabled? ? 'fa-toggle-on' : 'fa-toggle-off' %> w-4 h-4"></i>
      <span class="text-sm"><%= admin_v2_enabled? ? 'Disable Admin V2' : 'Enable Admin V2' %></span>
    <% end %>
    <div class="flex items-center gap-2.5 px-2.5 py-1.5 text-gray-600">
      <i class="fa fa-info-circle w-4 h-4"></i>
      <span class="text-sm">Version <%= ENV['REVISION'] || 'dev' %></span>
    </div>
  </div>
</div>
