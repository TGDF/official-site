<!-- Sidebar Header -->
<div class="px-4 py-3 border-b border-gray-200 h-16 flex items-center">
  <div class="flex items-center gap-2">
    <div class="w-7 h-7 bg-blue-600 rounded-full flex items-center justify-center">
      <div class="w-3.5 h-3.5 bg-white rounded-full"></div>
    </div>
    <span class="text-lg font-semibold text-gray-900"><%= t('site_name') %></span>
  </div>
</div>

<!-- Sidebar Body -->
<div class="flex-1 overflow-hidden flex flex-col min-h-0">
  <nav class="flex-1 px-3 pt-3 space-y-0.5 overflow-y-auto overflow-x-hidden min-h-0" aria-label="Sidebar" data-controller="sidebar">
    <!-- Dashboard Item -->
    <div class="mb-3">
      <%= admin_v2_sidebar_item t('.dashboard'), admin_root_path, icon: 'tachometer' %>
    </div>

    <% unless tenant_site? %>
      <!-- Sites Section -->
      <div class="space-y-0.5 mt-4">
        <%= admin_v2_sidebar_section t('.system') %>
        <%= admin_v2_sidebar_treeview t('.sites'), icon: 'sitemap' do %>
          <%= admin_v2_sidebar_item t('.list'), admin_sites_path, icon: 'list' %>
          <%= admin_v2_sidebar_item t('.new'), new_admin_site_path, icon: 'plus' %>
        <% end %>
      </div>
    <% end %>

    <!-- General Section -->
    <div class="space-y-0.5 mt-4">
      <%= admin_v2_sidebar_section t('.general') %>
      <%= admin_v2_sidebar_treeview t('.news'), icon: 'newspaper-o' do %>
        <%= admin_v2_sidebar_item t('.list'), admin_news_index_path, icon: 'list' %>
        <%= admin_v2_sidebar_item t('.new'), new_admin_news_path, icon: 'plus' %>
      <% end %>

      <%= admin_v2_sidebar_treeview t('.slider'), icon: 'picture-o' do %>
        <%= admin_v2_sidebar_item t('.list'), admin_sliders_path, icon: 'list' %>
        <%= admin_v2_sidebar_item t('.new'), new_admin_slider_path, icon: 'plus' %>
      <% end %>

      <%= admin_v2_sidebar_treeview t('.blocks'), icon: 'cube' do %>
        <%= admin_v2_sidebar_item t('.list'), admin_blocks_path, icon: 'list' %>
        <%= admin_v2_sidebar_item t('.new'), new_admin_block_path, icon: 'plus' %>
      <% end %>
    </div>

    <% if tenant_site? %>
      <!-- Tenant Features Section -->
      <div class="space-y-0.5 mt-4">
        <%= admin_v2_sidebar_section t('.tenant_features') %>
        <%= admin_v2_sidebar_treeview t('.menus'), icon: 'bars' do %>
          <%= admin_v2_sidebar_item t('.list'), admin_menu_items_path, icon: 'list' %>
          <%= admin_v2_sidebar_item t('.new'), new_admin_menu_item_path, icon: 'plus' %>
        <% end %>

        <%= admin_v2_sidebar_treeview t('.plans'), icon: 'cube' do %>
          <%= admin_v2_sidebar_item t('.list'), admin_plans_path, icon: 'list' %>
          <%= admin_v2_sidebar_item t('.new'), new_admin_plan_path, icon: 'plus' %>
        <% end %>

        <%= admin_v2_sidebar_treeview t('.partner'), icon: 'handshake-o' do %>
          <%= admin_v2_sidebar_item t('.list'), admin_partners_path, icon: 'list' %>
          <%= admin_v2_sidebar_item t('.new'), new_admin_partner_path, icon: 'plus' %>
          <%= admin_v2_sidebar_item t('.types'), admin_partner_types_path, icon: 'folder-o' %>
          <%= admin_v2_sidebar_item t('.new_type'), new_admin_partner_type_path, icon: 'plus' %>
        <% end %>

        <%= admin_v2_sidebar_treeview t('.sponsor'), icon: 'money' do %>
          <%= admin_v2_sidebar_item t('.list'), admin_sponsors_path, icon: 'list' %>
          <%= admin_v2_sidebar_item t('.new'), new_admin_sponsor_path, icon: 'plus' %>
          <%= admin_v2_sidebar_item t('.levels'), admin_sponsor_levels_path, icon: 'diamond' %>
          <%= admin_v2_sidebar_item t('.new_level'), new_admin_sponsor_level_path, icon: 'plus' %>
        <% end %>

        <%= admin_v2_sidebar_treeview t('.speaker'), icon: 'users' do %>
          <%= admin_v2_sidebar_item t('.list'), admin_speakers_path, icon: 'list' %>
          <%= admin_v2_sidebar_item t('.new'), new_admin_speaker_path, icon: 'plus' %>
        <% end %>

        <%= admin_v2_sidebar_treeview t('.agenda'), icon: 'file-text' do %>
          <%= admin_v2_sidebar_item t('.list'), admin_agendas_path, icon: 'list' %>
          <%= admin_v2_sidebar_item t('.new'), new_admin_agenda_path, icon: 'plus' %>
          <%= admin_v2_sidebar_item t('.rooms'), admin_rooms_path, icon: 'columns' %>
          <%= admin_v2_sidebar_item t('.new_room'), new_admin_room_path, icon: 'plus' %>
          <%= admin_v2_sidebar_item t('.days'), admin_agenda_days_path, icon: 'calendar' %>
          <%= admin_v2_sidebar_item t('.new_day'), new_admin_agenda_day_path, icon: 'plus' %>
          <%= admin_v2_sidebar_item t('.times'), admin_agenda_times_path, icon: 'clock-o' %>
          <%= admin_v2_sidebar_item t('.new_time'), new_admin_agenda_time_path, icon: 'plus' %>
          <%= admin_v2_sidebar_item t('.tags'), admin_agenda_tags_path, icon: 'tags' %>
          <%= admin_v2_sidebar_item t('.new_tag'), new_admin_agenda_tag_path, icon: 'plus' %>
        <% end %>

        <%= admin_v2_sidebar_treeview t('.indie_space'), icon: 'gamepad' do %>
          <%= admin_v2_sidebar_item t('.list'), admin_indie_space_games_path, icon: 'list' %>
          <%= admin_v2_sidebar_item t('.new'), new_admin_indie_space_game_path, icon: 'plus' %>
          <%= admin_v2_sidebar_item t('.options'), edit_admin_indie_space_path, icon: 'gear' %>
        <% end %>

        <%= admin_v2_sidebar_treeview t('.night_market'), icon: 'moon-o' do %>
          <%= admin_v2_sidebar_item t('.list'), admin_night_market_games_path, icon: 'list' %>
          <%= admin_v2_sidebar_item t('.new'), new_admin_night_market_game_path, icon: 'plus' %>
        <% end %>

        <!-- Options (Standalone Item) -->
        <%= admin_v2_sidebar_item t('.options'), edit_admin_options_path, icon: 'gear' %>
      </div>
    <% end %>
  </nav>

  <!-- Sidebar Footer -->
  <div class="px-3 py-3 border-t border-gray-200 space-y-0.5 shrink-0">
    <%= link_to admin_feature_toggle_path(feature: 'admin_v1_legacy'), method: :patch, data: { turbo_method: :patch },
                class: "flex items-center gap-2.5 px-2.5 py-1.5 text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded-md cursor-pointer" do %>
      <i class="fa <%= admin_v1_legacy_enabled? ? 'fa-toggle-on' : 'fa-toggle-off' %> w-4 h-4"></i>
      <span class="text-sm"><%= admin_v1_legacy_enabled? ? 'Disable Legacy UI' : 'Enable Legacy UI' %></span>
    <% end %>
    <div class="flex items-center gap-2.5 px-2.5 py-1.5 text-gray-600">
      <i class="fa fa-info-circle w-4 h-4"></i>
      <span class="text-sm">Version <%= ENV['REVISION'] || 'dev' %></span>
    </div>
  </div>
</div>
